import pandas as pd
import matplotlib.pyplot as plt

# Данные обрезаны для примера (для ускорения обработки)
data = {
    "timestamp": [
        "01.04.2020", "01.05.2020", "01.06.2020", "01.07.2020",
        "01.08.2020", "01.09.2020", "01.10.2020", "01.11.2020", "01.12.2020", "01.01.2021",
        "01.02.2021", "01.03.2021", "01.04.2021", "01.05.2021", "01.06.2021", "01.07.2021",
        "01.08.2021", "01.09.2021", "01.10.2021", "01.11.2021", "01.12.2021", "01.01.2022",
        "01.02.2022", "01.03.2022", "01.04.2022", "01.05.2022", "01.06.2022", "01.07.2022",
        "01.08.2022", "01.09.2022", "01.10.2022", "01.11.2022", "01.12.2022", "01.01.2023",
        "01.02.2023", "01.03.2023", "01.04.2023", "01.05.2023", "01.06.2023", "01.07.2023",
        "01.08.2023", "01.09.2023", "01.10.2023", "01.11.2023", "01.12.2023", "01.01.2024",
        "01.02.2024", "01.03.2024", "01.04.2024", "01.05.2024", "01.06.2024", "01.07.2024",
        "01.08.2024", "01.09.2024", "01.10.2024", "01.11.2024", "01.12.2024", "01.01.2025",
        "01.02.2025", "01.03.2025", "01.04.2025"
    ],
    "капитализация Bitcoin": [
    12479164455298.025,
    12938202021193.535,
    11845088092783.773,
    14870337874826.996,
    14850510903959.818,
    14736862832826.62,
    19842563148979.984,
    28909642083991.016,
    41205015091850.66,
    45584337937806.12,
    63814478512096.945,
    81979496844836.08,
    81741698974845.9,
    52627972291547.36,
    48234913345586.52,
    57114428834716.86,
    64874001326578.17,
    60450855756700.6,
    84134460876929.89,
    76338997904922.61,
    64919369480895.03,
    54528584179631.66,
    63375833653583.57,
    90853576735666.5,
    58663542392769.55,
    43223733215987.59,
    23689770025918.273,
    24471014664226.37,
    23885955402704.55,
    22391437340592.938,
    23683466130304.895,
    20402101720078.484,
    19437459572221.98,
    32898568540663.65,
    31540683760472.53,
    41320310115380.586,
    43930984492160.43,
    42459348782373.85,
    48109949443204.67,
    50485648694596.195,
    46279362995972.984,
    50420483220695.87,
    66350666870297.34,
    68834445093065.484,
    74510459973279.39,
    74543717577072.02,
    108094324509533.53,
    128020825335984.4,
    110507976757975.77,
    124273181208850.66,
    111749075696378.86,
    109067233663671.8,
    100148544586139.42,
    113299526550796.19,
    129140592802001.22,
    185833730430915.56,
    196975223618275.84,
    230840014404981.5,
    164927358658499.84,
    146359084889890.16,
    155294201705451.2
    ],

    "капитализация Ethereum":  [
    1805233666538.9387,
    1909199949345.213,
    1776944271574.3079,
    2754831355934.937,
    3366903999551.0894,
    2998677464401.044,
    3401485891082.421,
    5546016489397.528,
    6432938199181.78,
    11132153527772.422,
    12335505092247.807,
    16481488667560.059,
    24289467762820.523,
    23733150125869.38,
    19459941023538.293,
    21673448548050.02,
    29472095899173.816,
    25908464715860.54,
    36859830254276.805,
    38931064071880.56,
    32471418850725.418,
    24005103624051.4,
    27042036371487.3,
    41418075086749.55,
    26915832954325.438,
    16768827824959.064,
    8127776249015.55,
    11236847474421.81,
    11817764241615.508,
    9788737259822.865,
    11586040934171.56,
    9802873619882.615,
    8937326856801.719,
    14318596985465.023,
    13871337838016.691,
    16471051667384.291,
    17518951736642.79,
    18130332350624.727,
    18894793711068.805,
    19814488202395.85,
    18131272937669.08,
    19265194782515.723,
    21409534563200.543,
    23033119949221.066,
    24679953883048.05,
    24483068958157.105,
    36108085640423.74,
    39963100000000,
    34027371146916.035,
    42208823092881.57,
    37304615293538.125,
    33229800260096.734,
    26004361808963.773,
    28366517602180.586,
    28172489347061.516,
    43465488394066.69,
    42740871819143.6,
    45222049766985.55,
    26599074585470.55,
    19657136251783.36,
    17978421618519.652
    ],


    "капитализация USDT": [ 
    502045760101.46844,
    652926360395.1443,
    646536280337.9524,
    711830038282.8041,
    918906886225.8287,
    1146306344942.0232,
    1294308843495.5068,
    1518751257191.6611,
    1600608753524.9207,
    1956024065625.7065,
    2659071075882.905,
    3034982331163.7783,
    3860863659473.6333,
    4654232326431.846,
    4587302884147.996,
    4517505316882.441,
    4793131442111.665,
    5019969484368.417,
    5113354189210.275,
    5198992885890.474,
    5806957815237.222,
    5845586620784.451,
    6156794430770.171,
    8606354186209.335,
    6798799003612.754,
    5172456643381.986,
    4162626566821.3467,
    3633805225979.1885,
    4205042453542.6245,
    4086067431322.0522,
    4178859530975.3477,
    4041109768283.4873,
    4042424646776.507,
    5001669919635.612,
    5007374871724.322,
    5979906554761.705,
    6337281132210.433,
    6694410608740.179,
    6779158962058.3955,
    7444664070297.621,
    7593408165639.332,
    7982887556681.572,
    8299601120164.31,
    8333710858778.42,
    8251561551437.602,
    8572891916924.878,
    8880226895142.385,
    9535487155148.113,
    10235399727998.139,
    10454537193434.098,
    10192749739498.01,
    9786668579682.35,
    10166441062882.201,
    10828468446310.932,
    11198233916530.059,
    13055367883587.096,
    14642216977067.383,
    15851295617968.354,
    14010448734625.713,
    12856651089211.078,
    12321888859811.668
    ], 
}

# Создание DataFrame
df = pd.DataFrame(data)
df["timestamp"] = pd.to_datetime(df["timestamp"], format="%d.%m.%Y")

# Перевод капитализации в миллиарды для удобства отображения
df["капитализация Bitcoin"] = df["капитализация Bitcoin"] / 1e9
df["капитализация Ethereum"] = df["капитализация Ethereum"] / 1e9
df["капитализация USDT"] = df["капитализация USDT"] / 1e9

# Построение графика
plt.figure(figsize=(12, 6))
plt.plot(df["timestamp"], df["капитализация Bitcoin"], label="Bitcoin")
plt.plot(df["timestamp"], df["капитализация Ethereum"], label="Ethereum")
plt.plot(df["timestamp"], df["капитализация USDT"], label="USDT")

plt.title("Капитализация криптовалют (в млрд $)")
plt.xlabel("Дата")
plt.ylabel("Капитализация (млрд $)")
plt.legend()
plt.grid(True)
plt.tight_layout()

plt.savefig("capitalisation_5_last.png")

